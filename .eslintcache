[{"C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\index.js":"1","C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\App.jsx":"2","C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\redux\\store.js":"3","C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\components\\Pokemones.jsx":"4","C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\redux\\pokeDucks.js":"5","C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\components\\Detalle.jsx":"6","C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\components\\Login.jsx":"7","C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\components\\Navbar.jsx":"8","C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\redux\\usuarioDucks.js":"9","C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\firebase.js":"10","C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\components\\Perfil.jsx":"11"},{"size":386,"mtime":1612220909494,"results":"12","hashOfConfig":"13"},{"size":1617,"mtime":1612652410908,"results":"14","hashOfConfig":"13"},{"size":628,"mtime":1614263606477,"results":"15","hashOfConfig":"13"},{"size":2200,"mtime":1612497932831,"results":"16","hashOfConfig":"13"},{"size":3927,"mtime":1612198162699,"results":"17","hashOfConfig":"13"},{"size":871,"mtime":1611959081147,"results":"18","hashOfConfig":"13"},{"size":869,"mtime":1614289931697,"results":"19","hashOfConfig":"13"},{"size":1331,"mtime":1612652527599,"results":"20","hashOfConfig":"13"},{"size":3653,"mtime":1614290129897,"results":"21","hashOfConfig":"13"},{"size":646,"mtime":1612736715913,"results":"22","hashOfConfig":"13"},{"size":2628,"mtime":1614264455517,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"5227ml",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"37"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"26"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\index.js",[],["49","50"],"C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\App.jsx",[],"C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\redux\\store.js",[],"C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\components\\Pokemones.jsx",[],"C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\redux\\pokeDucks.js",[],"C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\components\\Detalle.jsx",[],["51","52"],"C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\components\\Login.jsx",[],"C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\components\\Navbar.jsx",[],"C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\redux\\usuarioDucks.js",["53"],"import { auth, firebase, db, storage } from \"../firebase\";\r\n\r\n// data inicial\r\nconst dataInicial = {\r\n  loading: false,\r\n  activo: false,\r\n};\r\n\r\n// type\r\nconst LOADING = \"LOADING\";\r\nconst USUARIO_ERROR = \"USARIO_ERROR\";\r\nconst USUARIO_EXITO = \"USUARIO_EXITO\";\r\nconst CERRAR_SESION = \"CERRAR_SESION\";\r\n\r\n// reducer\r\n\r\nexport default function usuarioReducer(state = dataInicial, action) {\r\n  switch (action.type) {\r\n    case LOADING:\r\n      return { ...state, loading: true };\r\n    case USUARIO_ERROR:\r\n      return { ...dataInicial };\r\n    case USUARIO_EXITO:\r\n      return { ...state, loading: false, user: action.payload, activo: true };\r\n    case CERRAR_SESION:\r\n      return { ...dataInicial };\r\n    default:\r\n      return { ...state };\r\n  }\r\n}\r\n\r\n// action\r\n\r\nexport const ingresoUsuarioAccion = () => async (dispatch) => {\r\n  dispatch({\r\n    type: LOADING,\r\n  });\r\n  try {\r\n    const provider = new firebase.auth.GoogleAuthProvider();\r\n    const res = await auth.signInWithPopup(provider);\r\n\r\n    console.log(res.user);\r\n\r\n    const usuario = {\r\n      uid: res.user.uid,\r\n      email: res.user.email,\r\n      displayName: res.user.displayName,\r\n      photoURL: res.user.photoURL,\r\n    };\r\n\r\n    const usuarioDB = await db.collection(\"usuarios\").doc(usuario.email).get();\r\n    console.log(usuarioDB);\r\n    if (usuarioDB.exists) {\r\n      //cuando exista el usuario en firestore\r\n      dispatch({\r\n        type: USUARIO_EXITO,\r\n        payload: usuarioDB.data(),\r\n      });\r\n      localStorage.setItem(\"usuario\", JSON.stringify(usuarioDB.data()));\r\n    } else {\r\n      // no existe el usuario en firestore\r\n      await db.collection(\"usuarios\").doc(usuario.email).set(usuario);\r\n      dispatch({\r\n        type: USUARIO_EXITO,\r\n        payload: usuario,\r\n      });\r\n      localStorage.setItem(\"usuario\", JSON.stringify(usuario));\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n    dispatch({\r\n      type: USUARIO_ERROR,\r\n    });\r\n  }\r\n};\r\n\r\nexport const leerUsuarioActivoAccion = () => (dispatch) => {\r\n  if (localStorage.getItem(\"usuario\")) {\r\n    dispatch({\r\n      type: USUARIO_EXITO,\r\n      payload: JSON.parse(localStorage.getItem(\"usuario\")),\r\n    });\r\n  }\r\n};\r\n\r\nexport const cerrarSesionAccion = () => (dispatch) => {\r\n  auth.signOut();\r\n  localStorage.removeItem(\"usuario\");\r\n  dispatch({\r\n    type: CERRAR_SESION,\r\n  });\r\n};\r\n\r\nexport const actualizarUsuarioAccion = (nombreActualizado) => async (dispatch, getState) => {\r\n  dispatch({\r\n    type: LOADING\r\n  })\r\n\r\n  const {user} = getState().usuario\r\n  console.log(user)\r\n  try {\r\n    await db.collection('usuarios').doc(user.email).update({\r\n      displayName: nombreActualizado\r\n    })\r\n    const usuario = {\r\n      ...user, \r\n      displayName: nombreActualizado\r\n    }\r\n    dispatch({\r\n      type: USUARIO_EXITO,\r\n      payload: usuario\r\n    })\r\n    localStorage.setItem('usuario', JSON.stringify(usuario))\r\n  } catch (error) {\r\n      console.log(error)\r\n  }\r\n}\r\n\r\nexport const editarFotoAccion = (imagenEditada) => async(dispatch, getState) => {\r\n  dispatch({\r\n    type: LOADING\r\n  })\r\n  const {user} = getState().usuario\r\n\r\n  try {\r\n    const imagenRef = await storage.ref().child(user.email).child('Foto perfil')\r\n    await imagenRef.put(imagenEditada)\r\n    const imagenURL = await imagenRef.getDownloadURL()\r\n\r\n    await db.collection('usuarios').doc(usuario.email).update({\r\n      photoURL: imagenURL\r\n    })\r\n\r\n    const usuario = {\r\n      ...user, \r\n      photoURL: imagenURL\r\n    }\r\n\r\n    dispatch({\r\n      type: USUARIO_EXITO,\r\n      payload: usuario\r\n    })\r\n    localStorage.setItem('usuario', JSON.stringify(usuario))\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}","C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\firebase.js",[],"C:\\Users\\Usuario\\Desktop\\programacion\\curso React\\udemy-redux-1\\src\\components\\Perfil.jsx",[],{"ruleId":"54","replacedBy":"55"},{"ruleId":"56","replacedBy":"57"},{"ruleId":"54","replacedBy":"58"},{"ruleId":"56","replacedBy":"59"},{"ruleId":"60","severity":1,"message":"61","line":130,"column":41,"nodeType":"62","messageId":"63","endLine":130,"endColumn":48},"no-native-reassign",["64"],"no-negated-in-lhs",["65"],["64"],["65"],"no-use-before-define","'usuario' was used before it was defined.","Identifier","usedBeforeDefined","no-global-assign","no-unsafe-negation"]